CREATE DATABASE IF NOT EXISTS gestion_nominas;
USE gestion_nominas;

CREATE TABLE empleados (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    dni VARCHAR(9) UNIQUE NOT NULL,
    sexo CHAR(1) CHECK (sexo IN ('H', 'M')),
    categoria INT CHECK (categoria BETWEEN 1 AND 10),
    anyos INT DEFAULT 0
);

CREATE TABLE nominas (
    id INT AUTO_INCREMENT PRIMARY KEY,
    empleado_id INT NOT NULL,
    sueldo DECIMAL(10,2) NOT NULL,
    fecha_calculo DATE DEFAULT (CURRENT_DATE),
    FOREIGN KEY (empleado_id) REFERENCES empleados(id) ON DELETE CASCADE
);

INSERT INTO empleados (nombre, dni, sexo, categoria, anyos) VALUES
('James Cosling', '32000032G', 'H', 4, 7),
('Ada Lovelace', '32000031R', 'M', 1, 0);